<div id="latestversion"></div>
<script type="text/javascript">
// We'll take the version info from the latest stable Doomsday for Windows package.
task = new Array();
task['request'] = 'latestbuild?';
task['data'] = {
    graph: 'json',
    platform: 'win-x86'
};

var deferred = $.ajax({
    url: task['request'],
    data: task['data'],
    success: function(json){
        var ob = $('#latestversion');
        if(ob)
        {
            ob.empty();
            // Omit zeroes in the end.
            var components = json.version.split('.');
            while(components.length > 2)
            {
                if(components[components.length - 1] == '0')
                {
                    components.length--;
                }
                else break;
            }
            var cleanVersion = components.join('.');
            var html = '<h1><a href="http://sourceforge.net/project/platformdownload.php?group_id=74815" title="Download Doomsday Engine ' + cleanVersion + ' (latest stable) for my platform">' + cleanVersion + '</a></h1> <div class="download-button"><a href="http://sourceforge.net/project/platformdownload.php?group_id=74815" title="Download Doomsday Engine now for my platform">Download <span class="downarrow">&#x21E3;</span></a></div>';
            ob.append(html);
        }
    }
});
</script>
